{% extends "base.html" %}
{% block content %}
    <main class="app-content">
      <div class="app-title">
        <div>
          <h1><i class="fa fa-dashboard"></i> 메인화면</h1>
          
        </div>
        <ul class="app-breadcrumb breadcrumb">
          <li class="breadcrumb-item"><i class="fa fa-home fa-lg"></i></li>
          <li class="breadcrumb-item"><a href="#">메인화면</a></li>
        </ul>
      </div>
    
      <div class="row">
        <div class="col-md-6">
          <div class="tile">
            <h3 class="tile-title">최다메일 통계</h3>
            <div class="embed-responsive embed-responsive-16by9">
              <canvas class="embed-responsive-item" id="barChart1"></canvas>
            </div>
          </div>  
        </div>
        <div class="col-md-6">
            <div class="tile">
              <h3 class="tile-title">월별 건수</h3>
              <div class="embed-responsive embed-responsive-16by9">
                <canvas class="embed-responsive-item" id="barChart2"></canvas>
              </div>
            </div>  
          
        </div>
      </div>
      
      <div class="col-md-6">
        <div class="tile">
          <h3 class="tile-title">Monthly Sales</h3>
          <div class="embed-responsive embed-responsive-16by9">
            <canvas class="embed-responsive-item" id="lineChartDemo"></canvas>
          </div>
        </div>
        
      </div>
    </main>
    
{% endblock %}
{% block script %}
    <script type="text/javascript">
      var data = {
      	labels: [ {% for chartdata in data%} "{{ chartdata.recipient__name}}",{% endfor %}],
      	datasets: [
      		{
      			label: "훈련대상건",
      			fillColor: "rgba(220,220,220,0.2)",
      			strokeColor: "rgba(220,220,220,1)",
      			pointColor: "rgba(220,220,220,1)",
      			pointStrokeColor: "#fff",
      			pointHighlightFill: "#fff",
      			pointHighlightStroke: "rgba(220,220,220,1)",
      			data: [{% for chartdata in data%} "{{ chartdata.mail_count}}",{% endfor %}]
      		},
      		{
      			label: "훈련메일열람건",
      			fillColor: "rgba(151,187,205,0.2)",
      			strokeColor: "rgba(151,187,205,1)",
      			pointColor: "rgba(151,187,205,1)",
      			pointStrokeColor: "#fff",
      			pointHighlightFill: "#fff",
      			pointHighlightStroke: "rgba(151,187,205,1)",
      			data: [{% for chartdata in data%} "{{ chartdata.mail_count}}",{% endfor %}]
      		}
      	]
      };

      var monthdata = {
      	labels: [ {% for chartdata in monthdata%} "{{ chartdata.month_name}}",{% endfor %}],
      	datasets: [
      		{
      			label: "총건수",
      			fillColor: "rgba(220,220,220,0.2)",
      			strokeColor: "rgba(220,220,220,1)",
      			pointColor: "rgba(220,220,220,1)",
      			pointStrokeColor: "#fff",
      			pointHighlightFill: "#fff",
      			pointHighlightStroke: "rgba(220,220,220,1)",
      			data: [{% for chartdata in monthdata%} "{{ chartdata.month_count}}",{% endfor %}]
      		},
      		{
      			label: "열람건수",
      			fillColor: "rgba(151,187,205,0.2)",
      			strokeColor: "rgba(151,187,205,1)",
      			pointColor: "rgba(151,187,205,1)",
      			pointStrokeColor: "#fff",
      			pointHighlightFill: "#fff",
      			pointHighlightStroke: "rgba(151,187,205,1)",
      			data: [{% for chartdata in monthdata%} "{{ chartdata.month_count}}",{% endfor %}]
      		}
      	]
      };
      


      var pdata = [
      	{
      		value: 300,
      		color: "#46BFBD",
      		highlight: "#5AD3D1",
      		label: "Complete"
      	},
      	{
      		value: 50,
      		color:"#F7464A",
      		highlight: "#FF5A5E",
      		label: "In-Progress"
      	}
      ]
      
      var ctxl = $("#lineChartDemo").get(0).getContext("2d");
      var lineChart = new Chart(ctxl).Line(data);
      
      var ctxp = $("#barChart2").get(0).getContext("2d");
      var pieChart = new Chart(ctxp).Bar(monthdata);

      var ctxb = $("#barChart1").get(0).getContext("2d");
      var barChart = new Chart(ctxb).Bar(data);
    </script>
    <!-- Google analytics script-->
    
{% endblock %}
